<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>RubyCritic</title>
    <link href="../../../../../assets/stylesheets/application.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../../../../../assets/stylesheets/prettify.custom_theme.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <header class="project-header group">
      <div class="container">
        <h1 class="logo"><a href="../../../../../overview.html" class="logo-link">RubyCritic</a></h1>
        <nav class="project-nav">
          <a href="../../../../../overview.html" class="project-nav-item">Overview</a>
          <a href="../../../../../code_index.html" class="project-nav-item">Code</a>
          <a href="../../../../../smells_index.html" class="project-nav-item">Smells</a>
        </nav>
      </div>
    </header>
    <div class="container">
      <div class="file-header group rated">
  <span class="rating rating-f circled-text circle">
    F
  </span>
  <h2 class="file-name">TingYun::Support::Serialize::OkJson::Utf8Error</h2>

  <span class="file-committed-at">
    
      Updated <time class='js-timeago' datetime='2016-01-12 03:53:45 +0000'>2016-01-12 03:53:45 +0000</time>
    
  </span>

  <div class="file-stats group">
    <div class="file-stat">
      720 complexity
    </div>
    <div class="file-stat">
      24.8 complexity per method
    </div>
    <div class="file-stat">
      4 churn
    </div>
    <div class="file-stat">
      29 methods
    </div>
    <div class="file-stat">
      32 duplication
    </div>
  </div>

  
    <button id="js-toggle-smells" class="smells-toggle-button button">Toggle Smells</button>
  
</div>

<code class="prettyprint linenums lang-ruby file-code js-file-code"># encoding: utf-8

#
# Copyright 2011, 2012 Keith Rarick
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the &quot;Software&quot;), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.


require &#39;stringio&#39;

# Some parts adapted from
# http://golang.org/src/pkg/json/decode.go and
# http://golang.org/src/pkg/utf8/utf8.go
module TingYun
  module Support
    module Serialize
      module OkJson<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Irresponsible-Module.md" target="_blank">IrresponsibleModule</a>)      TingYun::Support::Serialize::OkJson has no descriptive comment          </span>  </li></ul>
        Upstream = &#39;LTD7LBKLZWFF7OZK&#39;
        extend self


        # Decodes a json document in string s and
        # returns the corresponding ruby value.
        # String s must be valid UTF-8. If you have
        # a string in some other encoding, convert
        # it first.
        #
        # String values in the resulting structure
        # will be UTF-8.
        def decode(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#decode has the parameter name 's'          </span>  </li></ul>
          ts = lex(s)
          v, ts = textparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#decode has the variable name 'v'          </span>  </li></ul>
          if ts.length &gt; 0
            raise Error, &#39;trailing garbage&#39;
          end
          v
        end


        # Parses a &quot;json text&quot; in the sense of RFC 4627.
        # Returns the parsed value and any trailing tokens.
        # Note: this is almost the same as valparse,
        # except that it does not accept atomic values.
        def textparse(ts)
          if ts.length &lt; 0
            raise Error, &#39;empty&#39;
          end

          typ, _, val = ts[0]
          case typ
            when &#39;{&#39; then
              objparse(ts)
            when &#39;[&#39; then
              arrparse(ts)
            else
              raise Error, &quot;unexpected #{val.inspect}&quot;
          end
        end


        # Parses a &quot;value&quot; in the sense of RFC 4627.
        # Returns the parsed value and any trailing tokens.
        def valparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#valparse has approx 6 statements          </span>  </li></ul>
          if ts.length &lt; 0
            raise Error, &#39;empty&#39;
          end

          typ, _, val = ts[0]
          case typ
            when &#39;{&#39; then
              objparse(ts)
            when &#39;[&#39; then
              arrparse(ts)
            when :val, :str then
              [val, ts[1..-1]]
            else
              raise Error, &quot;unexpected #{val.inspect}&quot;
          end
        end


        # Parses an &quot;object&quot; in the sense of RFC 4627.
        # Returns the parsed value and any trailing tokens.
        def objparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      TingYun::Support::Serialize::OkJson#objparse has a flog score of 27          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#objparse has approx 11 statements          </span>  </li></ul>
          ts = eat(&#39;{&#39;, ts)
          obj = {}

          if ts[0][0] == &#39;}&#39;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0] 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0][0] 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0][0] == '}' 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#objparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L105" class="js-smell-location">1</a>                  <a href="ok_json.html#L111" class="js-smell-location">2</a>                  <a href="ok_json.html#L112" class="js-smell-location">3</a>                  <a href="ok_json.html#L121" class="js-smell-location">4</a>                  <a href="ok_json.html#L122" class="js-smell-location">5</a>                  </span>  </li></ul>
            return obj, ts[1..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[1..-1] 3 times                        <a href="ok_json.html#L105" class="js-smell-location">0</a>                  <a href="ok_json.html#L112" class="js-smell-location">1</a>                  <a href="ok_json.html#L122" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#objparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L105" class="js-smell-location">1</a>                  <a href="ok_json.html#L111" class="js-smell-location">2</a>                  <a href="ok_json.html#L112" class="js-smell-location">3</a>                  <a href="ok_json.html#L121" class="js-smell-location">4</a>                  <a href="ok_json.html#L122" class="js-smell-location">5</a>                  </span>  </li></ul>
          end

          k, v, ts = pairparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls pairparse(ts) 2 times                        <a href="ok_json.html#L108" class="js-smell-location">0</a>                  <a href="ok_json.html#L118" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#objparse has the variable name 'k'                        <a href="ok_json.html#L108" class="js-smell-location">0</a>                  <a href="ok_json.html#L118" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#objparse has the variable name 'v'                        <a href="ok_json.html#L108" class="js-smell-location">0</a>                  <a href="ok_json.html#L118" class="js-smell-location">1</a>                  </span>  </li></ul>
          obj[k] = v<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls obj[k] = v 2 times                        <a href="ok_json.html#L109" class="js-smell-location">0</a>                  <a href="ok_json.html#L119" class="js-smell-location">1</a>                  </span>  </li></ul>

          if ts[0][0] == &#39;}&#39;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0] 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0][0] 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0][0] == '}' 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#objparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L105" class="js-smell-location">1</a>                  <a href="ok_json.html#L111" class="js-smell-location">2</a>                  <a href="ok_json.html#L112" class="js-smell-location">3</a>                  <a href="ok_json.html#L121" class="js-smell-location">4</a>                  <a href="ok_json.html#L122" class="js-smell-location">5</a>                  </span>  </li></ul>
            return obj, ts[1..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[1..-1] 3 times                        <a href="ok_json.html#L105" class="js-smell-location">0</a>                  <a href="ok_json.html#L112" class="js-smell-location">1</a>                  <a href="ok_json.html#L122" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#objparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L105" class="js-smell-location">1</a>                  <a href="ok_json.html#L111" class="js-smell-location">2</a>                  <a href="ok_json.html#L112" class="js-smell-location">3</a>                  <a href="ok_json.html#L121" class="js-smell-location">4</a>                  <a href="ok_json.html#L122" class="js-smell-location">5</a>                  </span>  </li></ul>
          end

          loop do
            ts = eat(&#39;,&#39;, ts)

            k, v, ts = pairparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls pairparse(ts) 2 times                        <a href="ok_json.html#L108" class="js-smell-location">0</a>                  <a href="ok_json.html#L118" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#objparse has the variable name 'k'                        <a href="ok_json.html#L108" class="js-smell-location">0</a>                  <a href="ok_json.html#L118" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#objparse has the variable name 'v'                        <a href="ok_json.html#L108" class="js-smell-location">0</a>                  <a href="ok_json.html#L118" class="js-smell-location">1</a>                  </span>  </li></ul>
            obj[k] = v<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls obj[k] = v 2 times                        <a href="ok_json.html#L109" class="js-smell-location">0</a>                  <a href="ok_json.html#L119" class="js-smell-location">1</a>                  </span>  </li></ul>

            if ts[0][0] == &#39;}&#39;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0] 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0][0] 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[0][0] == '}' 3 times                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L111" class="js-smell-location">1</a>                  <a href="ok_json.html#L121" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#objparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L105" class="js-smell-location">1</a>                  <a href="ok_json.html#L111" class="js-smell-location">2</a>                  <a href="ok_json.html#L112" class="js-smell-location">3</a>                  <a href="ok_json.html#L121" class="js-smell-location">4</a>                  <a href="ok_json.html#L122" class="js-smell-location">5</a>                  </span>  </li></ul>
              return obj, ts[1..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#objparse calls ts[1..-1] 3 times                        <a href="ok_json.html#L105" class="js-smell-location">0</a>                  <a href="ok_json.html#L112" class="js-smell-location">1</a>                  <a href="ok_json.html#L122" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#objparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L104" class="js-smell-location">0</a>                  <a href="ok_json.html#L105" class="js-smell-location">1</a>                  <a href="ok_json.html#L111" class="js-smell-location">2</a>                  <a href="ok_json.html#L112" class="js-smell-location">3</a>                  <a href="ok_json.html#L121" class="js-smell-location">4</a>                  <a href="ok_json.html#L122" class="js-smell-location">5</a>                  </span>  </li></ul>
            end
          end
        end


        # Parses a &quot;member&quot; in the sense of RFC 4627.
        # Returns the parsed values and any trailing tokens.
        def pairparse(ts)
          (typ, _, k), ts = ts[0], ts[1..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#pairparse has the variable name 'k'          </span>  </li></ul>
          if typ != :str
            raise Error, &quot;unexpected #{k.inspect}&quot;
          end
          ts = eat(&#39;:&#39;, ts)
          v, ts = valparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#pairparse has the variable name 'v'          </span>  </li></ul>
          [k, v, ts]
        end


        # Parses an &quot;array&quot; in the sense of RFC 4627.
        # Returns the parsed value and any trailing tokens.
        def arrparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      TingYun::Support::Serialize::OkJson#arrparse has a flog score of 27          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#arrparse has approx 11 statements          </span>  </li></ul>
          ts = eat(&#39;[&#39;, ts)
          arr = []

          if ts[0][0] == &#39;]&#39;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0] 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0][0] 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0][0] == ']' 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#arrparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L148" class="js-smell-location">1</a>                  <a href="ok_json.html#L154" class="js-smell-location">2</a>                  <a href="ok_json.html#L155" class="js-smell-location">3</a>                  <a href="ok_json.html#L164" class="js-smell-location">4</a>                  <a href="ok_json.html#L165" class="js-smell-location">5</a>                  </span>  </li></ul>
            return arr, ts[1..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[1..-1] 3 times                        <a href="ok_json.html#L148" class="js-smell-location">0</a>                  <a href="ok_json.html#L155" class="js-smell-location">1</a>                  <a href="ok_json.html#L165" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#arrparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L148" class="js-smell-location">1</a>                  <a href="ok_json.html#L154" class="js-smell-location">2</a>                  <a href="ok_json.html#L155" class="js-smell-location">3</a>                  <a href="ok_json.html#L164" class="js-smell-location">4</a>                  <a href="ok_json.html#L165" class="js-smell-location">5</a>                  </span>  </li></ul>
          end

          v, ts = valparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls valparse(ts) 2 times                        <a href="ok_json.html#L151" class="js-smell-location">0</a>                  <a href="ok_json.html#L161" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#arrparse has the variable name 'v'                        <a href="ok_json.html#L151" class="js-smell-location">0</a>                  <a href="ok_json.html#L161" class="js-smell-location">1</a>                  </span>  </li></ul>
          arr &lt;&lt; v<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls arr << v 2 times                        <a href="ok_json.html#L152" class="js-smell-location">0</a>                  <a href="ok_json.html#L162" class="js-smell-location">1</a>                  </span>  </li></ul>

          if ts[0][0] == &#39;]&#39;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0] 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0][0] 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0][0] == ']' 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#arrparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L148" class="js-smell-location">1</a>                  <a href="ok_json.html#L154" class="js-smell-location">2</a>                  <a href="ok_json.html#L155" class="js-smell-location">3</a>                  <a href="ok_json.html#L164" class="js-smell-location">4</a>                  <a href="ok_json.html#L165" class="js-smell-location">5</a>                  </span>  </li></ul>
            return arr, ts[1..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[1..-1] 3 times                        <a href="ok_json.html#L148" class="js-smell-location">0</a>                  <a href="ok_json.html#L155" class="js-smell-location">1</a>                  <a href="ok_json.html#L165" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#arrparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L148" class="js-smell-location">1</a>                  <a href="ok_json.html#L154" class="js-smell-location">2</a>                  <a href="ok_json.html#L155" class="js-smell-location">3</a>                  <a href="ok_json.html#L164" class="js-smell-location">4</a>                  <a href="ok_json.html#L165" class="js-smell-location">5</a>                  </span>  </li></ul>
          end

          loop do
            ts = eat(&#39;,&#39;, ts)

            v, ts = valparse(ts)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls valparse(ts) 2 times                        <a href="ok_json.html#L151" class="js-smell-location">0</a>                  <a href="ok_json.html#L161" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#arrparse has the variable name 'v'                        <a href="ok_json.html#L151" class="js-smell-location">0</a>                  <a href="ok_json.html#L161" class="js-smell-location">1</a>                  </span>  </li></ul>
            arr &lt;&lt; v<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls arr << v 2 times                        <a href="ok_json.html#L152" class="js-smell-location">0</a>                  <a href="ok_json.html#L162" class="js-smell-location">1</a>                  </span>  </li></ul>

            if ts[0][0] == &#39;]&#39;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0] 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0][0] 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[0][0] == ']' 3 times                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L154" class="js-smell-location">1</a>                  <a href="ok_json.html#L164" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#arrparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L148" class="js-smell-location">1</a>                  <a href="ok_json.html#L154" class="js-smell-location">2</a>                  <a href="ok_json.html#L155" class="js-smell-location">3</a>                  <a href="ok_json.html#L164" class="js-smell-location">4</a>                  <a href="ok_json.html#L165" class="js-smell-location">5</a>                  </span>  </li></ul>
              return arr, ts[1..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#arrparse calls ts[1..-1] 3 times                        <a href="ok_json.html#L148" class="js-smell-location">0</a>                  <a href="ok_json.html#L155" class="js-smell-location">1</a>                  <a href="ok_json.html#L165" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#arrparse refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L147" class="js-smell-location">0</a>                  <a href="ok_json.html#L148" class="js-smell-location">1</a>                  <a href="ok_json.html#L154" class="js-smell-location">2</a>                  <a href="ok_json.html#L155" class="js-smell-location">3</a>                  <a href="ok_json.html#L164" class="js-smell-location">4</a>                  <a href="ok_json.html#L165" class="js-smell-location">5</a>                  </span>  </li></ul>
            end
          end
        end


        def eat(typ, ts)
          if ts[0][0] != typ<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#eat calls ts[0] 2 times                        <a href="ok_json.html#L172" class="js-smell-location">0</a>                  <a href="ok_json.html#L173" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#eat refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L172" class="js-smell-location">0</a>                  <a href="ok_json.html#L173" class="js-smell-location">1</a>                  <a href="ok_json.html#L175" class="js-smell-location">2</a>                  </span>  </li></ul>
            raise Error, &quot;expected #{typ} (got #{ts[0].inspect})&quot;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#eat calls ts[0] 2 times                        <a href="ok_json.html#L172" class="js-smell-location">0</a>                  <a href="ok_json.html#L173" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#eat refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L172" class="js-smell-location">0</a>                  <a href="ok_json.html#L173" class="js-smell-location">1</a>                  <a href="ok_json.html#L175" class="js-smell-location">2</a>                  </span>  </li></ul>
          end
          ts[1..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#eat refers to ts more than self (maybe move it to another class?)                        <a href="ok_json.html#L172" class="js-smell-location">0</a>                  <a href="ok_json.html#L173" class="js-smell-location">1</a>                  <a href="ok_json.html#L175" class="js-smell-location">2</a>                  </span>  </li></ul>
        end


        # Scans s and returns a list of json tokens,
        # excluding white space (as defined in RFC 4627).
        def lex(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#lex has approx 6 statements          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#lex has the parameter name 's'          </span>  </li></ul>
          ts = []
          while s.length &gt; 0<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#lex refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L183" class="js-smell-location">0</a>                  <a href="ok_json.html#L186" class="js-smell-location">1</a>                  <a href="ok_json.html#L191" class="js-smell-location">2</a>                  </span>  </li></ul>
            typ, lexeme, val = tok(s)
            if typ == nil<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Nil-Check.md" target="_blank">NilCheck</a>)      TingYun::Support::Serialize::OkJson#lex performs a nil-check          </span>  </li></ul>
              raise Error, &quot;invalid character at #{s[0, 10].inspect}&quot;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#lex refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L183" class="js-smell-location">0</a>                  <a href="ok_json.html#L186" class="js-smell-location">1</a>                  <a href="ok_json.html#L191" class="js-smell-location">2</a>                  </span>  </li></ul>
            end
            if typ != :space
              ts &lt;&lt; [typ, lexeme, val]
            end
            s = s[lexeme.length..-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#lex refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L183" class="js-smell-location">0</a>                  <a href="ok_json.html#L186" class="js-smell-location">1</a>                  <a href="ok_json.html#L191" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#lex has the variable name 's'          </span>  </li></ul>
          end
          ts
        end


        # Scans the first token in s and
        # returns a 3-element list, or nil
        # if s does not begin with a valid token.
        #
        # The first list element is one of
        # &#39;{&#39;, &#39;}&#39;, &#39;:&#39;, &#39;,&#39;, &#39;[&#39;, &#39;]&#39;,
        # :val, :str, and :space.
        #
        # The second element is the lexeme.
        #
        # The third element is the value of the
        # token for :val and :str, otherwise
        # it is the lexeme.
        def tok(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      TingYun::Support::Serialize::OkJson#tok has a flog score of 45          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#tok has approx 15 statements          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#tok has the parameter name 's'          </span>  </li></ul>
          case s[0]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?{ then
              [&#39;{&#39;, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?} then
              [&#39;}&#39;, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?: then
              [&#39;:&#39;, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?, then
              [&#39;,&#39;, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?[ then
              [&#39;[&#39;, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?] then
              [&#39;]&#39;, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?n then
              nulltok(s)
            when ?t then
              truetok(s)
            when ?f then
              falsetok(s)
            when ?&quot; then
              strtok(s)
            when Spc then
              [:space, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?\t then
              [:space, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?\n then
              [:space, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            when ?\r then
              [:space, s[0, 1], s[0, 1]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#tok calls s[0, 1] 20 times                        <a href="ok_json.html#L213" class="js-smell-location">0</a>                  <a href="ok_json.html#L215" class="js-smell-location">1</a>                  <a href="ok_json.html#L217" class="js-smell-location">2</a>                  <a href="ok_json.html#L219" class="js-smell-location">3</a>                  <a href="ok_json.html#L221" class="js-smell-location">4</a>                  <a href="ok_json.html#L223" class="js-smell-location">5</a>                  <a href="ok_json.html#L233" class="js-smell-location">6</a>                  <a href="ok_json.html#L235" class="js-smell-location">7</a>                  <a href="ok_json.html#L237" class="js-smell-location">8</a>                  <a href="ok_json.html#L239" class="js-smell-location">9</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#tok refers to s more than self (maybe move it to another class?)                        <a href="ok_json.html#L211" class="js-smell-location">0</a>                  <a href="ok_json.html#L213" class="js-smell-location">1</a>                  <a href="ok_json.html#L215" class="js-smell-location">2</a>                  <a href="ok_json.html#L217" class="js-smell-location">3</a>                  <a href="ok_json.html#L219" class="js-smell-location">4</a>                  <a href="ok_json.html#L221" class="js-smell-location">5</a>                  <a href="ok_json.html#L223" class="js-smell-location">6</a>                  <a href="ok_json.html#L233" class="js-smell-location">7</a>                  <a href="ok_json.html#L235" class="js-smell-location">8</a>                  <a href="ok_json.html#L237" class="js-smell-location">9</a>                  <a href="ok_json.html#L239" class="js-smell-location">10</a>                  </span>  </li></ul>
            else
              numtok(s)
          end
        end


        def nulltok(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#nulltok has the parameter name 's'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank">UtilityFunction</a>)      TingYun::Support::Serialize::OkJson#nulltok doesn't depend on instance state (maybe move it to another class?)          </span>  </li></ul>
          ; s[0, 4] == &#39;null&#39; ? [:val, &#39;null&#39;, nil] : []
        end

        def truetok(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#truetok has the parameter name 's'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank">UtilityFunction</a>)      TingYun::Support::Serialize::OkJson#truetok doesn't depend on instance state (maybe move it to another class?)          </span>  </li></ul>
          ; s[0, 4] == &#39;true&#39; ? [:val, &#39;true&#39;, true] : []
        end

        def falsetok(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#falsetok has the parameter name 's'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank">UtilityFunction</a>)      TingYun::Support::Serialize::OkJson#falsetok doesn't depend on instance state (maybe move it to another class?)          </span>  </li></ul>
          ; s[0, 5] == &#39;false&#39; ? [:val, &#39;false&#39;, false] : []
        end


        def numtok(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#numtok has the parameter name 's'          </span>  </li></ul>
          m = /-?([1-9][0-9]+|[0-9])([.][0-9]+)?([eE][+-]?[0-9]+)?/.match(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      TingYun::Support::Serialize::OkJson#numtok has a flog score of 34          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#numtok has the variable name 'm'          </span>  </li></ul>
          if m &amp;&amp; m.begin(0) == 0<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#numtok refers to m more than self (maybe move it to another class?)                        <a href="ok_json.html#L261" class="js-smell-location">0</a>                  <a href="ok_json.html#L262" class="js-smell-location">1</a>                  <a href="ok_json.html#L263" class="js-smell-location">2</a>                  <a href="ok_json.html#L264" class="js-smell-location">3</a>                  <a href="ok_json.html#L265" class="js-smell-location">4</a>                  <a href="ok_json.html#L267" class="js-smell-location">5</a>                  </span>  </li></ul>
            if m[3] &amp;&amp; !m[2]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#numtok calls m[2] 2 times                        <a href="ok_json.html#L262" class="js-smell-location">0</a>                  <a href="ok_json.html#L264" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#numtok calls m[3] 2 times                        <a href="ok_json.html#L262" class="js-smell-location">0</a>                  <a href="ok_json.html#L263" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#numtok refers to m more than self (maybe move it to another class?)                        <a href="ok_json.html#L261" class="js-smell-location">0</a>                  <a href="ok_json.html#L262" class="js-smell-location">1</a>                  <a href="ok_json.html#L263" class="js-smell-location">2</a>                  <a href="ok_json.html#L264" class="js-smell-location">3</a>                  <a href="ok_json.html#L265" class="js-smell-location">4</a>                  <a href="ok_json.html#L267" class="js-smell-location">5</a>                  </span>  </li></ul>
              [:val, m[0], Integer(m[1])*(10**Integer(m[3][1..-1]))]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#numtok calls m[0] 5 times                        <a href="ok_json.html#L263" class="js-smell-location">0</a>                  <a href="ok_json.html#L265" class="js-smell-location">1</a>                  <a href="ok_json.html#L267" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#numtok calls m[3] 2 times                        <a href="ok_json.html#L262" class="js-smell-location">0</a>                  <a href="ok_json.html#L263" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#numtok refers to m more than self (maybe move it to another class?)                        <a href="ok_json.html#L261" class="js-smell-location">0</a>                  <a href="ok_json.html#L262" class="js-smell-location">1</a>                  <a href="ok_json.html#L263" class="js-smell-location">2</a>                  <a href="ok_json.html#L264" class="js-smell-location">3</a>                  <a href="ok_json.html#L265" class="js-smell-location">4</a>                  <a href="ok_json.html#L267" class="js-smell-location">5</a>                  </span>  </li></ul>
            elsif m[2]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#numtok calls m[2] 2 times                        <a href="ok_json.html#L262" class="js-smell-location">0</a>                  <a href="ok_json.html#L264" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#numtok refers to m more than self (maybe move it to another class?)                        <a href="ok_json.html#L261" class="js-smell-location">0</a>                  <a href="ok_json.html#L262" class="js-smell-location">1</a>                  <a href="ok_json.html#L263" class="js-smell-location">2</a>                  <a href="ok_json.html#L264" class="js-smell-location">3</a>                  <a href="ok_json.html#L265" class="js-smell-location">4</a>                  <a href="ok_json.html#L267" class="js-smell-location">5</a>                  </span>  </li></ul>
              [:val, m[0], Float(m[0])]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#numtok calls m[0] 5 times                        <a href="ok_json.html#L263" class="js-smell-location">0</a>                  <a href="ok_json.html#L265" class="js-smell-location">1</a>                  <a href="ok_json.html#L267" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#numtok refers to m more than self (maybe move it to another class?)                        <a href="ok_json.html#L261" class="js-smell-location">0</a>                  <a href="ok_json.html#L262" class="js-smell-location">1</a>                  <a href="ok_json.html#L263" class="js-smell-location">2</a>                  <a href="ok_json.html#L264" class="js-smell-location">3</a>                  <a href="ok_json.html#L265" class="js-smell-location">4</a>                  <a href="ok_json.html#L267" class="js-smell-location">5</a>                  </span>  </li></ul>
            else
              [:val, m[0], Integer(m[0])]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#numtok calls m[0] 5 times                        <a href="ok_json.html#L263" class="js-smell-location">0</a>                  <a href="ok_json.html#L265" class="js-smell-location">1</a>                  <a href="ok_json.html#L267" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#numtok refers to m more than self (maybe move it to another class?)                        <a href="ok_json.html#L261" class="js-smell-location">0</a>                  <a href="ok_json.html#L262" class="js-smell-location">1</a>                  <a href="ok_json.html#L263" class="js-smell-location">2</a>                  <a href="ok_json.html#L264" class="js-smell-location">3</a>                  <a href="ok_json.html#L265" class="js-smell-location">4</a>                  <a href="ok_json.html#L267" class="js-smell-location">5</a>                  </span>  </li></ul>
            end
          else
            []
          end
        end


        def strtok(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#strtok has the parameter name 's'          </span>  </li></ul>
          m = /&quot;([^&quot;\\]|\\[&quot;\/\\bfnrt]|\\u[0-9a-fA-F]{4})*&quot;/.match(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#strtok has the variable name 'm'          </span>  </li></ul>
          if !m
            raise Error, &quot;invalid string literal at #{abbrev(s)}&quot;
          end
          [:str, m[0], unquote(m[0])]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#strtok calls m[0] 2 times          </span>  </li></ul>
        end


        def abbrev(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#abbrev has the parameter name 's'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank">UtilityFunction</a>)      TingYun::Support::Serialize::OkJson#abbrev doesn't depend on instance state (maybe move it to another class?)          </span>  </li></ul>
          t = s[0, 10]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#abbrev has the variable name 't'                        <a href="ok_json.html#L285" class="js-smell-location">0</a>                  <a href="ok_json.html#L287" class="js-smell-location">1</a>                  <a href="ok_json.html#L288" class="js-smell-location">2</a>                  </span>  </li></ul>
          p = t[&#39;`&#39;]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#abbrev has the variable name 'p'          </span>  </li></ul>
          t = t[0, p] if p<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#abbrev has the variable name 't'                        <a href="ok_json.html#L285" class="js-smell-location">0</a>                  <a href="ok_json.html#L287" class="js-smell-location">1</a>                  <a href="ok_json.html#L288" class="js-smell-location">2</a>                  </span>  </li></ul>
          t = t + &#39;...&#39; if t.length &lt; s.length<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#abbrev has the variable name 't'                        <a href="ok_json.html#L285" class="js-smell-location">0</a>                  <a href="ok_json.html#L287" class="js-smell-location">1</a>                  <a href="ok_json.html#L288" class="js-smell-location">2</a>                  </span>  </li></ul>
          &#39;`&#39; + t + &#39;`&#39;
        end


        # Converts a quoted json string literal q into a UTF-8-encoded string.
        # The rules are different than for Ruby, so we cannot use eval.
        # Unquote will raise an error if q contains control characters.
        def unquote(q)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#unquote has approx 32 statements          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#unquote has the parameter name 'q'          </span>  </li></ul>
          q = q[1...-1]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">VeryHighComplexity</a>)      TingYun::Support::Serialize::OkJson#unquote has a flog score of 104          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'q'          </span>  </li></ul>
          a = q.dup # allocate a big enough string<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'a'          </span>  </li></ul>
          rubydoesenc = false
          # In ruby &gt;= 1.9, a[w] is a codepoint, not a byte.
          if a.class.method_defined?(:force_encoding)
            a.force_encoding(&#39;UTF-8&#39;)
            rubydoesenc = true
          end
          r, w = 0, 0<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'r'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L310" class="js-smell-location">1</a>                  <a href="ok_json.html#L318" class="js-smell-location">2</a>                  <a href="ok_json.html#L322" class="js-smell-location">3</a>                  <a href="ok_json.html#L325" class="js-smell-location">4</a>                  <a href="ok_json.html#L331" class="js-smell-location">5</a>                  <a href="ok_json.html#L338" class="js-smell-location">6</a>                  <a href="ok_json.html#L360" class="js-smell-location">7</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'w'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L319" class="js-smell-location">1</a>                  <a href="ok_json.html#L323" class="js-smell-location">2</a>                  <a href="ok_json.html#L344" class="js-smell-location">3</a>                  <a href="ok_json.html#L346" class="js-smell-location">4</a>                  <a href="ok_json.html#L361" class="js-smell-location">5</a>                  </span>  </li></ul>
          while r &lt; q.length<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q.length 3 times                        <a href="ok_json.html#L306" class="js-smell-location">0</a>                  <a href="ok_json.html#L311" class="js-smell-location">1</a>                  <a href="ok_json.html#L333" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
            c = q[r]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q[r] 5 times                        <a href="ok_json.html#L307" class="js-smell-location">0</a>                  <a href="ok_json.html#L315" class="js-smell-location">1</a>                  <a href="ok_json.html#L317" class="js-smell-location">2</a>                  <a href="ok_json.html#L321" class="js-smell-location">3</a>                  <a href="ok_json.html#L349" class="js-smell-location">4</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'c'          </span>  </li></ul>
            case true
              when c == ?\\
                r += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'r'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L310" class="js-smell-location">1</a>                  <a href="ok_json.html#L318" class="js-smell-location">2</a>                  <a href="ok_json.html#L322" class="js-smell-location">3</a>                  <a href="ok_json.html#L325" class="js-smell-location">4</a>                  <a href="ok_json.html#L331" class="js-smell-location">5</a>                  <a href="ok_json.html#L338" class="js-smell-location">6</a>                  <a href="ok_json.html#L360" class="js-smell-location">7</a>                  </span>  </li></ul>
                if r &gt;= q.length<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q.length 3 times                        <a href="ok_json.html#L306" class="js-smell-location">0</a>                  <a href="ok_json.html#L311" class="js-smell-location">1</a>                  <a href="ok_json.html#L333" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
                  raise Error, &quot;string literal ends with a \&quot;\\\&quot;: \&quot;#{q}\&quot;&quot;
                end

                case q[r]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q[r] 5 times                        <a href="ok_json.html#L307" class="js-smell-location">0</a>                  <a href="ok_json.html#L315" class="js-smell-location">1</a>                  <a href="ok_json.html#L317" class="js-smell-location">2</a>                  <a href="ok_json.html#L321" class="js-smell-location">3</a>                  <a href="ok_json.html#L349" class="js-smell-location">4</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
                  when ?&quot;, ?\\, ?/, ?&#39;
                    a[w] = q[r]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q[r] 5 times                        <a href="ok_json.html#L307" class="js-smell-location">0</a>                  <a href="ok_json.html#L315" class="js-smell-location">1</a>                  <a href="ok_json.html#L317" class="js-smell-location">2</a>                  <a href="ok_json.html#L321" class="js-smell-location">3</a>                  <a href="ok_json.html#L349" class="js-smell-location">4</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
                    r += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'r'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L310" class="js-smell-location">1</a>                  <a href="ok_json.html#L318" class="js-smell-location">2</a>                  <a href="ok_json.html#L322" class="js-smell-location">3</a>                  <a href="ok_json.html#L325" class="js-smell-location">4</a>                  <a href="ok_json.html#L331" class="js-smell-location">5</a>                  <a href="ok_json.html#L338" class="js-smell-location">6</a>                  <a href="ok_json.html#L360" class="js-smell-location">7</a>                  </span>  </li></ul>
                    w += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'w'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L319" class="js-smell-location">1</a>                  <a href="ok_json.html#L323" class="js-smell-location">2</a>                  <a href="ok_json.html#L344" class="js-smell-location">3</a>                  <a href="ok_json.html#L346" class="js-smell-location">4</a>                  <a href="ok_json.html#L361" class="js-smell-location">5</a>                  </span>  </li></ul>
                  when ?b, ?f, ?n, ?r, ?t
                    a[w] = Unesc[q[r]]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q[r] 5 times                        <a href="ok_json.html#L307" class="js-smell-location">0</a>                  <a href="ok_json.html#L315" class="js-smell-location">1</a>                  <a href="ok_json.html#L317" class="js-smell-location">2</a>                  <a href="ok_json.html#L321" class="js-smell-location">3</a>                  <a href="ok_json.html#L349" class="js-smell-location">4</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
                    r += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'r'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L310" class="js-smell-location">1</a>                  <a href="ok_json.html#L318" class="js-smell-location">2</a>                  <a href="ok_json.html#L322" class="js-smell-location">3</a>                  <a href="ok_json.html#L325" class="js-smell-location">4</a>                  <a href="ok_json.html#L331" class="js-smell-location">5</a>                  <a href="ok_json.html#L338" class="js-smell-location">6</a>                  <a href="ok_json.html#L360" class="js-smell-location">7</a>                  </span>  </li></ul>
                    w += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'w'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L319" class="js-smell-location">1</a>                  <a href="ok_json.html#L323" class="js-smell-location">2</a>                  <a href="ok_json.html#L344" class="js-smell-location">3</a>                  <a href="ok_json.html#L346" class="js-smell-location">4</a>                  <a href="ok_json.html#L361" class="js-smell-location">5</a>                  </span>  </li></ul>
                  when ?u
                    r += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'r'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L310" class="js-smell-location">1</a>                  <a href="ok_json.html#L318" class="js-smell-location">2</a>                  <a href="ok_json.html#L322" class="js-smell-location">3</a>                  <a href="ok_json.html#L325" class="js-smell-location">4</a>                  <a href="ok_json.html#L331" class="js-smell-location">5</a>                  <a href="ok_json.html#L338" class="js-smell-location">6</a>                  <a href="ok_json.html#L360" class="js-smell-location">7</a>                  </span>  </li></ul>
                    uchar = begin
                      hexdec4(q[r, 4])<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q[r, 4] 2 times                        <a href="ok_json.html#L327" class="js-smell-location">0</a>                  <a href="ok_json.html#L329" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
                    rescue RuntimeError =&gt; e<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'e'          </span>  </li></ul>
                      raise Error, &quot;invalid escape sequence \\u#{q[r, 4]}: #{e}&quot;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q[r, 4] 2 times                        <a href="ok_json.html#L327" class="js-smell-location">0</a>                  <a href="ok_json.html#L329" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
                    end
                    r += 4<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'r'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L310" class="js-smell-location">1</a>                  <a href="ok_json.html#L318" class="js-smell-location">2</a>                  <a href="ok_json.html#L322" class="js-smell-location">3</a>                  <a href="ok_json.html#L325" class="js-smell-location">4</a>                  <a href="ok_json.html#L331" class="js-smell-location">5</a>                  <a href="ok_json.html#L338" class="js-smell-location">6</a>                  <a href="ok_json.html#L360" class="js-smell-location">7</a>                  </span>  </li></ul>
                    if surrogate? uchar
                      if q.length &gt;= r+6<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q.length 3 times                        <a href="ok_json.html#L306" class="js-smell-location">0</a>                  <a href="ok_json.html#L311" class="js-smell-location">1</a>                  <a href="ok_json.html#L333" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
                        uchar1 = hexdec4(q[r+2, 4])<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'uchar1'          </span>  </li></ul>
                        uchar = subst(uchar, uchar1)
                        if uchar != Ucharerr
                          # A valid pair; consume.
                          r += 6<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'r'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L310" class="js-smell-location">1</a>                  <a href="ok_json.html#L318" class="js-smell-location">2</a>                  <a href="ok_json.html#L322" class="js-smell-location">3</a>                  <a href="ok_json.html#L325" class="js-smell-location">4</a>                  <a href="ok_json.html#L331" class="js-smell-location">5</a>                  <a href="ok_json.html#L338" class="js-smell-location">6</a>                  <a href="ok_json.html#L360" class="js-smell-location">7</a>                  </span>  </li></ul>
                        end
                      end
                    end
                    if rubydoesenc
                      a[w] = &#39;&#39; &lt;&lt; uchar
                      w += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'w'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L319" class="js-smell-location">1</a>                  <a href="ok_json.html#L323" class="js-smell-location">2</a>                  <a href="ok_json.html#L344" class="js-smell-location">3</a>                  <a href="ok_json.html#L346" class="js-smell-location">4</a>                  <a href="ok_json.html#L361" class="js-smell-location">5</a>                  </span>  </li></ul>
                    else
                      w += ucharenc(a, w, uchar)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'w'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L319" class="js-smell-location">1</a>                  <a href="ok_json.html#L323" class="js-smell-location">2</a>                  <a href="ok_json.html#L344" class="js-smell-location">3</a>                  <a href="ok_json.html#L346" class="js-smell-location">4</a>                  <a href="ok_json.html#L361" class="js-smell-location">5</a>                  </span>  </li></ul>
                    end
                  else
                    raise Error, &quot;invalid escape char #{q[r]} in \&quot;#{q}\&quot;&quot;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#unquote calls q[r] 5 times                        <a href="ok_json.html#L307" class="js-smell-location">0</a>                  <a href="ok_json.html#L315" class="js-smell-location">1</a>                  <a href="ok_json.html#L317" class="js-smell-location">2</a>                  <a href="ok_json.html#L321" class="js-smell-location">3</a>                  <a href="ok_json.html#L349" class="js-smell-location">4</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#unquote refers to q more than self (maybe move it to another class?)                        <a href="ok_json.html#L297" class="js-smell-location">0</a>                  <a href="ok_json.html#L298" class="js-smell-location">1</a>                  <a href="ok_json.html#L306" class="js-smell-location">2</a>                  <a href="ok_json.html#L307" class="js-smell-location">3</a>                  <a href="ok_json.html#L311" class="js-smell-location">4</a>                  <a href="ok_json.html#L315" class="js-smell-location">5</a>                  <a href="ok_json.html#L317" class="js-smell-location">6</a>                  <a href="ok_json.html#L321" class="js-smell-location">7</a>                  <a href="ok_json.html#L327" class="js-smell-location">8</a>                  <a href="ok_json.html#L329" class="js-smell-location">9</a>                  <a href="ok_json.html#L333" class="js-smell-location">10</a>                  <a href="ok_json.html#L334" class="js-smell-location">11</a>                  <a href="ok_json.html#L349" class="js-smell-location">12</a>                  </span>  </li></ul>
                end
              when c == ?&quot;, c &lt; Spc
                raise Error, &quot;invalid character in string literal \&quot;#{q}\&quot;&quot;
              else
                # Copy anything else byte-for-byte.
                # Valid UTF-8 will remain valid UTF-8.
                # Invalid UTF-8 will remain invalid UTF-8.
                # In ruby &gt;= 1.9, c is a codepoint, not a byte,
                # in which case this is still what we want.
                a[w] = c
                r += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'r'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L310" class="js-smell-location">1</a>                  <a href="ok_json.html#L318" class="js-smell-location">2</a>                  <a href="ok_json.html#L322" class="js-smell-location">3</a>                  <a href="ok_json.html#L325" class="js-smell-location">4</a>                  <a href="ok_json.html#L331" class="js-smell-location">5</a>                  <a href="ok_json.html#L338" class="js-smell-location">6</a>                  <a href="ok_json.html#L360" class="js-smell-location">7</a>                  </span>  </li></ul>
                w += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#unquote has the variable name 'w'                        <a href="ok_json.html#L305" class="js-smell-location">0</a>                  <a href="ok_json.html#L319" class="js-smell-location">1</a>                  <a href="ok_json.html#L323" class="js-smell-location">2</a>                  <a href="ok_json.html#L344" class="js-smell-location">3</a>                  <a href="ok_json.html#L346" class="js-smell-location">4</a>                  <a href="ok_json.html#L361" class="js-smell-location">5</a>                  </span>  </li></ul>
            end
          end
          a[0, w]
        end


        # Encodes unicode character u as UTF-8
        # bytes in string a at position i.
        # Returns the number of bytes written.
        def ucharenc(a, i, u)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#ucharenc has approx 14 statements          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#ucharenc has the parameter name 'a'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#ucharenc has the parameter name 'i'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#ucharenc has the parameter name 'u'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank">UtilityFunction</a>)      TingYun::Support::Serialize::OkJson#ucharenc doesn't depend on instance state (maybe move it to another class?)          </span>  </li></ul>
          case true<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">VeryHighComplexity</a>)      TingYun::Support::Serialize::OkJson#ucharenc has a flog score of 80          </span>  </li></ul>
            when u &lt;= Uchar1max
              a[i] = (u &amp; 0xff).chr
              1
            when u &lt;= Uchar2max
              a[i+0] = (Utag2 | ((u&gt;&gt;6)&amp;0xff)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls i+0 3 times                        <a href="ok_json.html#L377" class="js-smell-location">0</a>                  <a href="ok_json.html#L381" class="js-smell-location">1</a>                  <a href="ok_json.html#L386" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls u>>6 3 times                        <a href="ok_json.html#L377" class="js-smell-location">0</a>                  <a href="ok_json.html#L382" class="js-smell-location">1</a>                  <a href="ok_json.html#L388" class="js-smell-location">2</a>                  </span>  </li></ul>
              a[i+1] = (Utagx | (u&amp;Umaskx)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls (Utagx | (u&Umaskx)).chr 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls Utagx | (u&Umaskx) 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls i+1 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L382" class="js-smell-location">1</a>                  <a href="ok_json.html#L387" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls u&Umaskx 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li></ul>
              2
            when u &lt;= Uchar3max
              a[i+0] = (Utag3 | ((u&gt;&gt;12)&amp;0xff)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls i+0 3 times                        <a href="ok_json.html#L377" class="js-smell-location">0</a>                  <a href="ok_json.html#L381" class="js-smell-location">1</a>                  <a href="ok_json.html#L386" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls u>>12 2 times                        <a href="ok_json.html#L381" class="js-smell-location">0</a>                  <a href="ok_json.html#L387" class="js-smell-location">1</a>                  </span>  </li></ul>
              a[i+1] = (Utagx | ((u&gt;&gt;6)&amp;Umaskx)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls (Utagx | ((u>>6)&Umaskx)).chr 2 times                        <a href="ok_json.html#L382" class="js-smell-location">0</a>                  <a href="ok_json.html#L388" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls (u>>6)&Umaskx 2 times                        <a href="ok_json.html#L382" class="js-smell-location">0</a>                  <a href="ok_json.html#L388" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls Utagx | ((u>>6)&Umaskx) 2 times                        <a href="ok_json.html#L382" class="js-smell-location">0</a>                  <a href="ok_json.html#L388" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls i+1 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L382" class="js-smell-location">1</a>                  <a href="ok_json.html#L387" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls u>>6 3 times                        <a href="ok_json.html#L377" class="js-smell-location">0</a>                  <a href="ok_json.html#L382" class="js-smell-location">1</a>                  <a href="ok_json.html#L388" class="js-smell-location">2</a>                  </span>  </li></ul>
              a[i+2] = (Utagx | (u&amp;Umaskx)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls (Utagx | (u&Umaskx)).chr 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls Utagx | (u&Umaskx) 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls i+2 2 times                        <a href="ok_json.html#L383" class="js-smell-location">0</a>                  <a href="ok_json.html#L388" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls u&Umaskx 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li></ul>
              3
            else
              a[i+0] = (Utag4 | ((u&gt;&gt;18)&amp;0xff)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls i+0 3 times                        <a href="ok_json.html#L377" class="js-smell-location">0</a>                  <a href="ok_json.html#L381" class="js-smell-location">1</a>                  <a href="ok_json.html#L386" class="js-smell-location">2</a>                  </span>  </li></ul>
              a[i+1] = (Utagx | ((u&gt;&gt;12)&amp;Umaskx)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls i+1 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L382" class="js-smell-location">1</a>                  <a href="ok_json.html#L387" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls u>>12 2 times                        <a href="ok_json.html#L381" class="js-smell-location">0</a>                  <a href="ok_json.html#L387" class="js-smell-location">1</a>                  </span>  </li></ul>
              a[i+2] = (Utagx | ((u&gt;&gt;6)&amp;Umaskx)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls (Utagx | ((u>>6)&Umaskx)).chr 2 times                        <a href="ok_json.html#L382" class="js-smell-location">0</a>                  <a href="ok_json.html#L388" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls (u>>6)&Umaskx 2 times                        <a href="ok_json.html#L382" class="js-smell-location">0</a>                  <a href="ok_json.html#L388" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls Utagx | ((u>>6)&Umaskx) 2 times                        <a href="ok_json.html#L382" class="js-smell-location">0</a>                  <a href="ok_json.html#L388" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls i+2 2 times                        <a href="ok_json.html#L383" class="js-smell-location">0</a>                  <a href="ok_json.html#L388" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls u>>6 3 times                        <a href="ok_json.html#L377" class="js-smell-location">0</a>                  <a href="ok_json.html#L382" class="js-smell-location">1</a>                  <a href="ok_json.html#L388" class="js-smell-location">2</a>                  </span>  </li></ul>
              a[i+3] = (Utagx | (u&amp;Umaskx)).chr<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls (Utagx | (u&Umaskx)).chr 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls Utagx | (u&Umaskx) 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharenc calls u&Umaskx 3 times                        <a href="ok_json.html#L378" class="js-smell-location">0</a>                  <a href="ok_json.html#L383" class="js-smell-location">1</a>                  <a href="ok_json.html#L389" class="js-smell-location">2</a>                  </span>  </li></ul>
              4
          end
        end


        def hexdec4(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Method-Name.md" target="_blank">UncommunicativeMethodName</a>)      TingYun::Support::Serialize::OkJson#hexdec4 has the name 'hexdec4'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#hexdec4 has the parameter name 's'          </span>  </li></ul>
          if s.length != 4<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      TingYun::Support::Serialize::OkJson#hexdec4 has a flog score of 30          </span>  </li></ul>
            raise Error, &#39;short&#39;
          end
          (nibble(s[0])&lt;&lt;12) | (nibble(s[1])&lt;&lt;8) | (nibble(s[2])&lt;&lt;4) | nibble(s[3])
        end


        def subst(u1, u2)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#subst has the parameter name 'u1'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#subst has the parameter name 'u2'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank">UtilityFunction</a>)      TingYun::Support::Serialize::OkJson#subst doesn't depend on instance state (maybe move it to another class?)          </span>  </li></ul>
          if Usurr1 &lt;= u1 &amp;&amp; u1 &lt; Usurr2 &amp;&amp; Usurr2 &lt;= u2 &amp;&amp; u2 &lt; Usurr3
            return ((u1-Usurr1)&lt;&lt;10) | (u2-Usurr2) + Usurrself
          end
          return Ucharerr
        end


        def surrogate?(u)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#surrogate? has the parameter name 'u'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank">UtilityFunction</a>)      TingYun::Support::Serialize::OkJson#surrogate? doesn't depend on instance state (maybe move it to another class?)          </span>  </li></ul>
          Usurr1 &lt;= u &amp;&amp; u &lt; Usurr3
        end


        def nibble(c)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#nibble has the parameter name 'c'          </span>  </li></ul>
          case true<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      TingYun::Support::Serialize::OkJson#nibble has a flog score of 28          </span>  </li></ul>
            when ?0 &lt;= c &amp;&amp; c &lt;= ?9 then<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#nibble refers to c more than self (maybe move it to another class?)                        <a href="ok_json.html#L418" class="js-smell-location">0</a>                  <a href="ok_json.html#L419" class="js-smell-location">1</a>                  <a href="ok_json.html#L420" class="js-smell-location">2</a>                  <a href="ok_json.html#L421" class="js-smell-location">3</a>                  <a href="ok_json.html#L422" class="js-smell-location">4</a>                  <a href="ok_json.html#L423" class="js-smell-location">5</a>                  </span>  </li></ul>
              c.ord - ?0.ord<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#nibble calls c.ord 3 times                        <a href="ok_json.html#L419" class="js-smell-location">0</a>                  <a href="ok_json.html#L421" class="js-smell-location">1</a>                  <a href="ok_json.html#L423" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#nibble refers to c more than self (maybe move it to another class?)                        <a href="ok_json.html#L418" class="js-smell-location">0</a>                  <a href="ok_json.html#L419" class="js-smell-location">1</a>                  <a href="ok_json.html#L420" class="js-smell-location">2</a>                  <a href="ok_json.html#L421" class="js-smell-location">3</a>                  <a href="ok_json.html#L422" class="js-smell-location">4</a>                  <a href="ok_json.html#L423" class="js-smell-location">5</a>                  </span>  </li></ul>
            when ?a &lt;= c &amp;&amp; c &lt;= ?z then<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#nibble refers to c more than self (maybe move it to another class?)                        <a href="ok_json.html#L418" class="js-smell-location">0</a>                  <a href="ok_json.html#L419" class="js-smell-location">1</a>                  <a href="ok_json.html#L420" class="js-smell-location">2</a>                  <a href="ok_json.html#L421" class="js-smell-location">3</a>                  <a href="ok_json.html#L422" class="js-smell-location">4</a>                  <a href="ok_json.html#L423" class="js-smell-location">5</a>                  </span>  </li></ul>
              c.ord - ?a.ord + 10<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flay/" target="_blank">DuplicateCode</a>)      Similar code found in 2 nodes                        <a href="ok_json.html#L421" class="js-smell-location">0</a>                  <a href="ok_json.html#L423" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#nibble calls c.ord 3 times                        <a href="ok_json.html#L419" class="js-smell-location">0</a>                  <a href="ok_json.html#L421" class="js-smell-location">1</a>                  <a href="ok_json.html#L423" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#nibble refers to c more than self (maybe move it to another class?)                        <a href="ok_json.html#L418" class="js-smell-location">0</a>                  <a href="ok_json.html#L419" class="js-smell-location">1</a>                  <a href="ok_json.html#L420" class="js-smell-location">2</a>                  <a href="ok_json.html#L421" class="js-smell-location">3</a>                  <a href="ok_json.html#L422" class="js-smell-location">4</a>                  <a href="ok_json.html#L423" class="js-smell-location">5</a>                  </span>  </li></ul>
            when ?A &lt;= c &amp;&amp; c &lt;= ?Z then<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#nibble refers to c more than self (maybe move it to another class?)                        <a href="ok_json.html#L418" class="js-smell-location">0</a>                  <a href="ok_json.html#L419" class="js-smell-location">1</a>                  <a href="ok_json.html#L420" class="js-smell-location">2</a>                  <a href="ok_json.html#L421" class="js-smell-location">3</a>                  <a href="ok_json.html#L422" class="js-smell-location">4</a>                  <a href="ok_json.html#L423" class="js-smell-location">5</a>                  </span>  </li></ul>
              c.ord - ?A.ord + 10<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flay/" target="_blank">DuplicateCode</a>)      Similar code found in 2 nodes                        <a href="ok_json.html#L421" class="js-smell-location">0</a>                  <a href="ok_json.html#L423" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#nibble calls c.ord 3 times                        <a href="ok_json.html#L419" class="js-smell-location">0</a>                  <a href="ok_json.html#L421" class="js-smell-location">1</a>                  <a href="ok_json.html#L423" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#nibble refers to c more than self (maybe move it to another class?)                        <a href="ok_json.html#L418" class="js-smell-location">0</a>                  <a href="ok_json.html#L419" class="js-smell-location">1</a>                  <a href="ok_json.html#L420" class="js-smell-location">2</a>                  <a href="ok_json.html#L421" class="js-smell-location">3</a>                  <a href="ok_json.html#L422" class="js-smell-location">4</a>                  <a href="ok_json.html#L423" class="js-smell-location">5</a>                  </span>  </li></ul>
            else
              raise Error, &quot;invalid hex code #{c}&quot;
          end
        end


        # Encodes x into a json text. It may contain only
        # Array, Hash, String, Numeric, true, false, nil.
        # (Note, this list excludes Symbol.)
        # X itself must be an Array or a Hash.
        # No other value can be encoded, and an error will
        # be raised if x contains any other value, such as
        # Nan, Infinity, Symbol, and Proc, or if a Hash key
        # is not a String.
        # Strings contained in x must be valid UTF-8.
        def encode(x)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#encode has the parameter name 'x'          </span>  </li></ul>
          case x
            when Hash then
              objenc(x)
            when Array then
              arrenc(x)
            else
              raise Error, &#39;root value must be an Array or a Hash&#39;
          end
        end


        def valenc(x)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#valenc has approx 8 statements          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#valenc has the parameter name 'x'          </span>  </li></ul>
          case x
            when Hash then
              objenc(x)
            when Array then
              arrenc(x)
            when String then
              strenc(x)
            when Numeric then
              numenc(x)
            when true then
              &quot;true&quot;
            when false then
              &quot;false&quot;
            when nil then<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Nil-Check.md" target="_blank">NilCheck</a>)      TingYun::Support::Serialize::OkJson#valenc performs a nil-check          </span>  </li></ul>
              &quot;null&quot;
            else
              raise Error, &quot;cannot encode #{x.class}: #{x.inspect}&quot;
          end
        end


        def objenc(x)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#objenc has the parameter name 'x'          </span>  </li></ul>
          &#39;{&#39; + x.map { |k, v| keyenc(k) + &#39;:&#39; + valenc(v) }.join(&#39;,&#39;) + &#39;}&#39;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#objenc has the variable name 'k'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#objenc has the variable name 'v'          </span>  </li></ul>
        end


        def arrenc(a)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#arrenc has the parameter name 'a'          </span>  </li></ul>
          &#39;[&#39; + a.map { |x| valenc(x) }.join(&#39;,&#39;) + &#39;]&#39;<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#arrenc has the variable name 'x'          </span>  </li></ul>
        end


        def keyenc(k)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#keyenc has the parameter name 'k'          </span>  </li></ul>
          case k
            when String then
              strenc(k)
            else
              raise Error, &quot;Hash key is not a string: #{k.inspect}&quot;
          end
        end


        def strenc(s)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#strenc has approx 21 statements          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#strenc has the parameter name 's'          </span>  </li></ul>
          t = StringIO.new<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">HighComplexity</a>)      TingYun::Support::Serialize::OkJson#strenc has a flog score of 48          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#strenc has the variable name 't'          </span>  </li></ul>
          t.putc(?&quot;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#strenc calls t.putc(?") 2 times                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L536" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
          r = 0<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#strenc has the variable name 'r'                        <a href="ok_json.html#L496" class="js-smell-location">0</a>                  <a href="ok_json.html#L531" class="js-smell-location">1</a>                  <a href="ok_json.html#L534" class="js-smell-location">2</a>                  </span>  </li></ul>

          # In ruby &gt;= 1.9, s[r] is a codepoint, not a byte.
          rubydoesenc = s.class.method_defined?(:encoding)

          while r &lt; s.length
            case s[r]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#strenc calls s[r] 2 times                        <a href="ok_json.html#L502" class="js-smell-location">0</a>                  <a href="ok_json.html#L518" class="js-smell-location">1</a>                  </span>  </li></ul>
              when ?&quot; then
                t.print(&#39;\\&quot;&#39;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
              when ?\\ then
                t.print(&#39;\\\\&#39;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
              when ?\b then
                t.print(&#39;\\b&#39;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
              when ?\f then
                t.print(&#39;\\f&#39;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
              when ?\n then
                t.print(&#39;\\n&#39;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
              when ?\r then
                t.print(&#39;\\r&#39;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
              when ?\t then
                t.print(&#39;\\t&#39;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
              else
                c = s[r]<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#strenc calls s[r] 2 times                        <a href="ok_json.html#L502" class="js-smell-location">0</a>                  <a href="ok_json.html#L518" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#strenc has the variable name 'c'          </span>  </li></ul>
                case true
                  when rubydoesenc
                    begin
                      c.ord # will raise an error if c is invalid UTF-8
                      t.write(c)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
                    rescue
                      t.write(Ustrerr)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
                    end
                  when Spc &lt;= c &amp;&amp; c &lt;= ?~
                    t.putc(c)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
                  else
                    n = ucharcopy(t, s, r) # ensure valid UTF-8 output<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#strenc has the variable name 'n'          </span>  </li></ul>
                    r += n - 1 # r is incremented below<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#strenc has the variable name 'r'                        <a href="ok_json.html#L496" class="js-smell-location">0</a>                  <a href="ok_json.html#L531" class="js-smell-location">1</a>                  <a href="ok_json.html#L534" class="js-smell-location">2</a>                  </span>  </li></ul>
                end
            end
            r += 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#strenc has the variable name 'r'                        <a href="ok_json.html#L496" class="js-smell-location">0</a>                  <a href="ok_json.html#L531" class="js-smell-location">1</a>                  <a href="ok_json.html#L534" class="js-smell-location">2</a>                  </span>  </li></ul>
          end
          t.putc(?&quot;)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#strenc calls t.putc(?") 2 times                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L536" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
          t.string<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#strenc refers to t more than self (maybe move it to another class?)                        <a href="ok_json.html#L495" class="js-smell-location">0</a>                  <a href="ok_json.html#L504" class="js-smell-location">1</a>                  <a href="ok_json.html#L506" class="js-smell-location">2</a>                  <a href="ok_json.html#L508" class="js-smell-location">3</a>                  <a href="ok_json.html#L510" class="js-smell-location">4</a>                  <a href="ok_json.html#L512" class="js-smell-location">5</a>                  <a href="ok_json.html#L514" class="js-smell-location">6</a>                  <a href="ok_json.html#L516" class="js-smell-location">7</a>                  <a href="ok_json.html#L523" class="js-smell-location">8</a>                  <a href="ok_json.html#L525" class="js-smell-location">9</a>                  <a href="ok_json.html#L528" class="js-smell-location">10</a>                  <a href="ok_json.html#L536" class="js-smell-location">11</a>                  <a href="ok_json.html#L537" class="js-smell-location">12</a>                  </span>  </li></ul>
        end


        def numenc(x)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#numenc has the parameter name 'x'          </span>  </li></ul>
          if ((x.nan? || x.infinite?) rescue false)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md" target="_blank">FeatureEnvy</a>)      TingYun::Support::Serialize::OkJson#numenc refers to x more than self (maybe move it to another class?)          </span>  </li></ul>
            raise Error, &quot;Numeric cannot be represented: #{x}&quot;
          end
          &quot;#{x}&quot;
        end


        # Copies the valid UTF-8 bytes of a single character
        # from string s at position i to I/O object t, and
        # returns the number of bytes copied.
        # If no valid UTF-8 char exists at position i,
        # ucharcopy writes Ustrerr and returns 1.
        def ucharcopy(t, s, i)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Too-Many-Statements.md" target="_blank">TooManyStatements</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has approx 35 statements          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the parameter name 'i'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the parameter name 's'          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Parameter-Name.md" target="_blank">UncommunicativeParameterName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the parameter name 't'          </span>  </li></ul>
          n = s.length - i<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the variable name 'n'          </span>  </li></ul>
          raise Utf8Error if n &lt; 1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="http://docs.seattlerb.org/flog/" target="_blank">VeryHighComplexity</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has a flog score of 128          </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>

          c0 = s[i].ord<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the variable name 'c0'          </span>  </li></ul>

          # 1-byte, 7-bit sequence?
          if c0 &lt; Utagx
            t.putc(c0)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c0) 4 times                        <a href="ok_json.html#L562" class="js-smell-location">0</a>                  <a href="ok_json.html#L575" class="js-smell-location">1</a>                  <a href="ok_json.html#L590" class="js-smell-location">2</a>                  <a href="ok_json.html#L605" class="js-smell-location">3</a>                  </span>  </li></ul>
            return 1
          end

          raise Utf8Error if c0 &lt; Utag2 # unexpected continuation byte?<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>

          raise Utf8Error if n &lt; 2 # need continuation byte<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>
          c1 = s[i+1].ord<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the variable name 'c1'          </span>  </li></ul>
          raise Utf8Error if c1 &lt; Utagx || Utag2 &lt;= c1<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>

          # 2-byte, 11-bit sequence?
          if c0 &lt; Utag3
            raise Utf8Error if ((c0&amp;Umask2)&lt;&lt;6 | (c1&amp;Umaskx)) &lt;= Uchar1max<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls c1&Umaskx 3 times                        <a href="ok_json.html#L574" class="js-smell-location">0</a>                  <a href="ok_json.html#L588" class="js-smell-location">1</a>                  <a href="ok_json.html#L603" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>
            t.putc(c0)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c0) 4 times                        <a href="ok_json.html#L562" class="js-smell-location">0</a>                  <a href="ok_json.html#L575" class="js-smell-location">1</a>                  <a href="ok_json.html#L590" class="js-smell-location">2</a>                  <a href="ok_json.html#L605" class="js-smell-location">3</a>                  </span>  </li></ul>
            t.putc(c1)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c1) 3 times                        <a href="ok_json.html#L576" class="js-smell-location">0</a>                  <a href="ok_json.html#L591" class="js-smell-location">1</a>                  <a href="ok_json.html#L606" class="js-smell-location">2</a>                  </span>  </li></ul>
            return 2
          end

          # need second continuation byte
          raise Utf8Error if n &lt; 3<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>

          c2 = s[i+2].ord<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the variable name 'c2'          </span>  </li></ul>
          raise Utf8Error if c2 &lt; Utagx || Utag2 &lt;= c2<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>

          # 3-byte, 16-bit sequence?
          if c0 &lt; Utag4
            u = (c0&amp;Umask3)&lt;&lt;12 | (c1&amp;Umaskx)&lt;&lt;6 | (c2&amp;Umaskx)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls c1&Umaskx 3 times                        <a href="ok_json.html#L574" class="js-smell-location">0</a>                  <a href="ok_json.html#L588" class="js-smell-location">1</a>                  <a href="ok_json.html#L603" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls c2&Umaskx 2 times                        <a href="ok_json.html#L588" class="js-smell-location">0</a>                  <a href="ok_json.html#L603" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the variable name 'u'                        <a href="ok_json.html#L588" class="js-smell-location">0</a>                  <a href="ok_json.html#L603" class="js-smell-location">1</a>                  </span>  </li></ul>
            raise Utf8Error if u &lt;= Uchar2max<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>
            t.putc(c0)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c0) 4 times                        <a href="ok_json.html#L562" class="js-smell-location">0</a>                  <a href="ok_json.html#L575" class="js-smell-location">1</a>                  <a href="ok_json.html#L590" class="js-smell-location">2</a>                  <a href="ok_json.html#L605" class="js-smell-location">3</a>                  </span>  </li></ul>
            t.putc(c1)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c1) 3 times                        <a href="ok_json.html#L576" class="js-smell-location">0</a>                  <a href="ok_json.html#L591" class="js-smell-location">1</a>                  <a href="ok_json.html#L606" class="js-smell-location">2</a>                  </span>  </li></ul>
            t.putc(c2)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c2) 2 times                        <a href="ok_json.html#L592" class="js-smell-location">0</a>                  <a href="ok_json.html#L607" class="js-smell-location">1</a>                  </span>  </li></ul>
            return 3
          end

          # need third continuation byte
          raise Utf8Error if n &lt; 4<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>
          c3 = s[i+3].ord<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the variable name 'c3'          </span>  </li></ul>
          raise Utf8Error if c3 &lt; Utagx || Utag2 &lt;= c3<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>

          # 4-byte, 21-bit sequence?
          if c0 &lt; Utag5
            u = (c0&amp;Umask4)&lt;&lt;18 | (c1&amp;Umaskx)&lt;&lt;12 | (c2&amp;Umaskx)&lt;&lt;6 | (c3&amp;Umaskx)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls c1&Umaskx 3 times                        <a href="ok_json.html#L574" class="js-smell-location">0</a>                  <a href="ok_json.html#L588" class="js-smell-location">1</a>                  <a href="ok_json.html#L603" class="js-smell-location">2</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls c2&Umaskx 2 times                        <a href="ok_json.html#L588" class="js-smell-location">0</a>                  <a href="ok_json.html#L603" class="js-smell-location">1</a>                  </span>  </li>  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Uncommunicative-Variable-Name.md" target="_blank">UncommunicativeVariableName</a>)      TingYun::Support::Serialize::OkJson#ucharcopy has the variable name 'u'                        <a href="ok_json.html#L588" class="js-smell-location">0</a>                  <a href="ok_json.html#L603" class="js-smell-location">1</a>                  </span>  </li></ul>
            raise Utf8Error if u &lt;= Uchar3max<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>
            t.putc(c0)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c0) 4 times                        <a href="ok_json.html#L562" class="js-smell-location">0</a>                  <a href="ok_json.html#L575" class="js-smell-location">1</a>                  <a href="ok_json.html#L590" class="js-smell-location">2</a>                  <a href="ok_json.html#L605" class="js-smell-location">3</a>                  </span>  </li></ul>
            t.putc(c1)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c1) 3 times                        <a href="ok_json.html#L576" class="js-smell-location">0</a>                  <a href="ok_json.html#L591" class="js-smell-location">1</a>                  <a href="ok_json.html#L606" class="js-smell-location">2</a>                  </span>  </li></ul>
            t.putc(c2)<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls t.putc(c2) 2 times                        <a href="ok_json.html#L592" class="js-smell-location">0</a>                  <a href="ok_json.html#L607" class="js-smell-location">1</a>                  </span>  </li></ul>
            t.putc(c3)
            return 4
          end

          raise Utf8Error<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Duplicate-Method-Call.md" target="_blank">DuplicateMethodCall</a>)      TingYun::Support::Serialize::OkJson#ucharcopy calls raise Utf8Error 12 times                        <a href="ok_json.html#L556" class="js-smell-location">0</a>                  <a href="ok_json.html#L566" class="js-smell-location">1</a>                  <a href="ok_json.html#L568" class="js-smell-location">2</a>                  <a href="ok_json.html#L570" class="js-smell-location">3</a>                  <a href="ok_json.html#L574" class="js-smell-location">4</a>                  <a href="ok_json.html#L581" class="js-smell-location">5</a>                  <a href="ok_json.html#L584" class="js-smell-location">6</a>                  <a href="ok_json.html#L589" class="js-smell-location">7</a>                  <a href="ok_json.html#L597" class="js-smell-location">8</a>                  <a href="ok_json.html#L599" class="js-smell-location">9</a>                  <a href="ok_json.html#L604" class="js-smell-location">10</a>                  <a href="ok_json.html#L612" class="js-smell-location">11</a>                  </span>  </li></ul>
        rescue Utf8Error
          t.write(Ustrerr)
          return 1
        end


        class Utf8Error &lt; ::StandardError<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Irresponsible-Module.md" target="_blank">IrresponsibleModule</a>)      TingYun::Support::Serialize::OkJson::Utf8Error has no descriptive comment          </span>  </li></ul>
        end


        class Error &lt; ::StandardError<ul class="nocode smells js-smells">  <li class="smell ">    <span class="description">      (<a href="https://github.com/troessner/reek/blob/master/docs/Irresponsible-Module.md" target="_blank">IrresponsibleModule</a>)      TingYun::Support::Serialize::OkJson::Error has no descriptive comment          </span>  </li></ul>
        end


        Utagx = 0x80 # 1000 0000
        Utag2 = 0xc0 # 1100 0000
        Utag3 = 0xe0 # 1110 0000
        Utag4 = 0xf0 # 1111 0000
        Utag5 = 0xF8 # 1111 1000
        Umaskx = 0x3f # 0011 1111
        Umask2 = 0x1f # 0001 1111
        Umask3 = 0x0f # 0000 1111
        Umask4 = 0x07 # 0000 0111
        Uchar1max = (1&lt;&lt;7) - 1
        Uchar2max = (1&lt;&lt;11) - 1
        Uchar3max = (1&lt;&lt;16) - 1
        Ucharerr = 0xFFFD # unicode &quot;replacement char&quot;
        Ustrerr = &quot;\xef\xbf\xbd&quot; # unicode &quot;replacement char&quot;
        Usurrself = 0x10000
        Usurr1 = 0xd800
        Usurr2 = 0xdc00
        Usurr3 = 0xe000

        Spc = &#39; &#39;[0]
        Unesc = {?b =&gt; ?\b, ?f =&gt; ?\f, ?n =&gt; ?\n, ?r =&gt; ?\r, ?t =&gt; ?\t}
      end
    end
  end
end
</code>

    </div>
    <script src='../../../../../assets/javascripts/jquery-2.1.0.js'></script>
    <script src='../../../../../assets/javascripts/jquery.tablesorter.js'></script>
    <script src='../../../../../assets/javascripts/jquery.floatThead-v1.2.7.js'></script>
    <script src='../../../../../assets/javascripts/jquery.timeago-v1.4.1.js'></script>
    <script src='../../../../../assets/javascripts/highcharts.src-4.0.1.js'></script>
    <script src='../../../../../assets/javascripts/jquery.scrollTo-1.4.11.js'></script>
    <script src='../../../../../assets/javascripts/prettify-4-Mar-2013.js'></script>
    <script src='../../../../../assets/javascripts/application.js'></script>
  </body>
</html>
